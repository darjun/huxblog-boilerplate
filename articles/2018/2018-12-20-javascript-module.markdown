### ä»€ä¹ˆæ˜¯æ¨¡å—

æ¨¡å—ï¼ˆmoduleï¼‰æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ
æ¨¡å—æ˜¯ä¸ºäº†è½¯ä»¶å°è£…ï¼Œå¤ç”¨ã€‚å½“ä»Šå¼€æºè¿åŠ¨ç››è¡Œï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆæ–¹ä¾¿åœ°ä½¿ç”¨åˆ«äººç¼–å†™å¥½çš„æ¨¡å—ï¼Œè€Œä¸ç”¨è‡ªå·±ä»å¤´å¼€å§‹ç¼–å†™ã€‚åœ¨ç¨‹åºè®¾è®¡ä¸­ï¼Œæˆ‘ä»¬ä¸€ç›´å¼ºè°ƒé¿å…é‡å¤é€ è½®å­ï¼ˆDon't Repeat Yourselfï¼ŒDRYï¼‰ã€‚

æƒ³è±¡ä¸€ä¸‹ï¼Œæ²¡æœ‰æ¨¡å—çš„æ—¥å­ï¼Œç¬¬ä¸‰åº“åŸºæœ¬éƒ½æ˜¯å¯¼å‡ºä¸€ä¸ªå…¨å±€å˜é‡ä¾›å¼€å‘è€…ä½¿ç”¨ã€‚ä¾‹å¦‚`jQuery`çš„`$`ï¼Œ`lodash`çš„`_`ã€‚è¿™äº›åº“å·²ç»å°½é‡é¿å…äº†å…¨å±€å˜é‡å†²çªï¼Œåªä½¿ç”¨å‡ ä¸ªå…¨å±€å˜é‡ã€‚ä½†æ˜¯è¿˜æ˜¯ä¸èƒ½é¿å…æœ‰å†²çªï¼Œ`jQuery`è¿˜æä¾›äº†`noConflict`ã€‚æ›´é‘è®ºæˆ‘ä»¬è‡ªå·±ç¼–å†™çš„ä»£ç ã€‚

æœ€åˆï¼ŒJavascript ä¸­æ˜¯æ²¡æœ‰æ¨¡å—çš„æ¦‚å¿µçš„ã€‚è¿™å¯èƒ½ä¸ä¸€å¼€å§‹ Javascript çš„å®šä½æœ‰å…³ã€‚Javascript æœ€åˆåªæ˜¯å¸Œæœ›ç»™ç½‘é¡µå¢åŠ åŠ¨æ€å…ƒç´ ï¼Œå®šä½æ˜¯ç®€å•æ˜“ç”¨çš„è„šæœ¬ã€‚
ä½†æ˜¯ï¼Œéšç€ç½‘é¡µç«¯åŠŸèƒ½è¶Šæ¥è¶Šä¸°å¯Œï¼Œç¨‹åºè¶Šæ¥è¶Šåºå¤§ï¼Œè½¯ä»¶å˜å¾—è¶Šæ¥è¶Šéš¾ä»¥ç»´æŠ¤ã€‚ç‰¹åˆ«æ˜¯éšç€ NodeJs çš„å…´èµ·ï¼ŒJavascript è¯­è¨€è¿›å…¥æœåŠ¡ç«¯ç¼–ç¨‹é¢†åŸŸã€‚åœ¨ç¼–å†™å¤§å‹å¤æ‚çš„ç¨‹åºï¼Œæ¨¡å—æ›´æ˜¯å¿…é¡»å“ã€‚

æ¨¡å—åªæ˜¯ä¸€ä¸ªæŠ½è±¡æ¦‚å¿µï¼Œè¦æƒ³åœ¨å®é™…ç¼–ç¨‹ä¸­ä½¿ç”¨è¿˜éœ€è¦è§„èŒƒã€‚å¦‚æœæ²¡æœ‰è§„èŒƒï¼Œæˆ‘æœ‰è¿™ç§å†™æ³•ï¼Œä½ ç”¨é‚£ç§å†™æ³•ï¼Œå²‚ä¸æ˜¯ä¹±äº†å¥—ã€‚

ç›®å‰ï¼Œæ¨¡å—çš„è§„èŒƒä¸»è¦æœ‰3ä¸­ï¼Œ[CommonJSæ¨¡å—](https://requirejs.org/docs/commonjs.html)ã€[AMDæ¨¡å—](https://github.com/amdjs/amdjs-api/wiki/AMD)å’ŒES6æ¨¡å—ã€‚æœ¬æ–‡ç€é‡è®²è§£ CommonJS æ¨¡å—ï¼ˆä»¥ Node å®ç°ä¸ºä»£è¡¨ï¼‰å’ŒES6æ¨¡å—ã€‚

### 2.CommonJSæ¨¡å—

CommonJS å…¶å®æ˜¯ä¸€ä¸ªé€šç”¨çš„ Javascript è¯­è¨€è§„èŒƒï¼Œå¹¶ä¸ä»…ä»…æ˜¯æ¨¡å—çš„è§„èŒƒã€‚Node ä¸­çš„æ¨¡å—éµå¾ª CommonJS æ ‡å‡†ã€‚

#### åŸºæœ¬ç”¨æ³•

Node ä¸­æä¾›äº†ä¸€ä¸ª`require`æ–¹æ³•ç”¨æ¥åŠ è½½æ¨¡å—ã€‚ä¾‹å¦‚ï¼š

```js
var fs = require('fs');

fs.readFile('file1.txt', 'utf8', function (err, data) {
    if (err) {
        console.error(err);
    } else {
        console.log(data);
    }
});
```

å¯¼å…¥æ¨¡å—ä¹‹åå°±å¯ä»¥ä½¿ç”¨æ¨¡å—ä¸­å®šä¹‰çš„æ¥å£äº†ï¼Œå¦‚ä¸Šä¾‹ä¸­çš„`readFile`ã€‚

#### æ¨¡å—ç±»åˆ«

åœ¨ Node ä¸­å¤§ä½“ä¸Šæœ‰3ç§æ¨¡å—ï¼Œæ™®é€šæ¨¡å—ã€æ ¸å¿ƒæ¨¡å—å’Œç¬¬ä¸‰æ–¹æ¨¡å—ã€‚
æ™®é€šæ¨¡å—ä¸æ ¸å¿ƒæ¨¡å—çš„å¯¼å…¥æ–¹å¼ç¨å¾®æœ‰äº›åŒºåˆ«ã€‚æ™®é€šæ¨¡å—æ˜¯æˆ‘ä»¬è‡ªå·±ç¼–å†™çš„æ¨¡å—ï¼Œæ ¸å¿ƒæ¨¡å—æ˜¯ Node æä¾›çš„æ¨¡å—ã€‚ä¸Šé¢æˆ‘ä»¬ä½¿ç”¨çš„`fs`å°±æ˜¯æ ¸å¿ƒæ¨¡å—ã€‚å¯¼å…¥æ™®é€šæ¨¡å—æ—¶ï¼Œéœ€è¦åœ¨`require`çš„å‚æ•°ä¸­æŒ‡å®šç›¸å¯¹è·¯å¾„ã€‚ä¾‹å¦‚ï¼š
```js
var myModule = require('./myModule');
myModule.func1();
```

æ¨¡å—`myModule`çš„åç¼€`.js`åç¼€å¯ä»¥çœç•¥ã€‚

Node å°†æ ¸å¿ƒæ¨¡å—ç¼–è¯‘è¿›äº†å¼•æ“ã€‚å¯¼å…¥æ ¸å¿ƒæ¨¡å—åªéœ€è¦æŒ‡å®šæ¨¡å—åï¼ŒNode å¼•æ“ç›´æ¥æŸ¥æ‰¾æ ¸å¿ƒæ¨¡å—å­—å…¸ã€‚

ç¬¬ä¸‰æ–¹æ¨¡å—çš„å¯¼å…¥ä¹Ÿæ˜¯æŒ‡å®šæ¨¡å—åï¼Œä½†æ˜¯æ¨¡å—çš„æŸ¥æ‰¾æ–¹å¼æœ‰æ‰€ä¸åŒã€‚
é¦–å…ˆï¼Œåœ¨é¡¹ç›®ç›®å½•ä¸‹çš„`node_modules`ç›®å½•ä¸­æŸ¥æ‰¾ã€‚
å¦‚æœæ²¡æœ‰æ‰¾åˆ°ï¼Œæ¥ç€å»é¡¹ç›®ç›®å½•çš„çˆ¶ç›®å½•ä¸­æŸ¥æ‰¾ã€‚
ç›´åˆ°æ‰¾åˆ°åŠ è½½è¯¥æ¨¡å—ï¼Œæˆ–è€…åˆ°æ ¹ç›®å½•è¿˜æœªæ‰¾åˆ°è¿”å›å¤±è´¥ã€‚

#### å®šä¹‰æ¨¡å—

åœ¨æˆ‘ä»¬æ—¥å¸¸çš„ç¼–ç¨‹ä¸­ï¼Œç»å¸¸éœ€è¦å°†ä¸€äº›åŠŸèƒ½å°è£…åœ¨ä¸€ä¸ªæ¨¡å—ä¸­ï¼Œæ–¹ä¾¿è‡ªå·±æˆ–ä»–äººä½¿ç”¨ã€‚åœ¨ Node ä¸­å®šä¹‰æ¨¡å—çš„è¯­æ³•å¾ˆç®€å•ã€‚æ¨¡å—å•ç‹¬åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œæ–‡ä»¶ä¸­å¯ä»¥ä½¿ç”¨`exports`å¯¼å‡ºæ¥å£æˆ–å˜é‡ã€‚ä¾‹å¦‚ï¼š
```js
function addTwoNumber(a, b) {
    return a + b;
}

exports.addTwoNumber = addTwoNumber;
```

å‡è®¾è¯¥æ¨¡å—åœ¨æ–‡ä»¶`myMath.js`ä¸­ã€‚åœ¨åŒä¸€ç›®å½•ä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·æ¥ä½¿ç”¨ï¼š
```js
var myMath = require('./myMath');

console.log(myMath.addTwoNumber(10, 20)); // 30
```

#### æ¨¡å—å¯¼å‡ºè¯¦è§£

å‡½æ•°å…·ä½“æ˜¯æ€ä¹ˆå¯¼å‡ºçš„å‘¢ï¼Ÿé™¤äº†`exports`ï¼Œæˆ‘ä»¬ç»å¸¸çœ‹åˆ°çš„`module.exports`ï¼Œ`__dirname`ï¼Œ`__filename`æ˜¯ä»å“ªé‡Œæ¥çš„ï¼Ÿ
åœ¨æ‰§è¡Œ`require`å‡½æ•°çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥ç†è§£ Node é¢å¤–åšäº†ä¸€äº›å¤„ç†ã€‚

* é¦–å…ˆï¼Œå°†æ¨¡å—æ‰€åœ¨æ–‡ä»¶å†…å®¹è¯»å‡ºæ¥ã€‚ç„¶åå°†è¿™äº›å†…å®¹åŒ…è£¹åœ¨ä¸€ä¸ªå‡½æ•°ä¸­ï¼š
```js
function _doRequire(module, exports, __filename, __dirname) {
    // æ¨¡å—æ–‡ä»¶å†…å®¹
}
```

* æ¥ä¸‹æ¥ï¼ŒNode å¼•æ“æ„é€ ä¸€ä¸ªç©ºçš„æ¨¡å—å¯¹è±¡ï¼Œç»™è¿™ä¸ªå¯¹è±¡ä¸€ä¸ªç©ºçš„`exports`å±æ€§ï¼Œç„¶åæ¨ç®—å‡º`__filename`ï¼ˆå½“å‰å¯¼å…¥çš„è¿™ä¸ªæ¨¡å—çš„å…¨è·¯å¾„æ–‡ä»¶åï¼‰å’Œ`__dirname`ï¼ˆæ¨¡å—æ–‡ä»¶æ‰€åœ¨è·¯å¾„ï¼‰ï¼š
```js
var module = {};
module.exports = {}
// __filename = ...
// __dirname = ...
```

* ç„¶åï¼Œè°ƒç”¨ç¬¬ä¸€æ­¥æ„é€ çš„é‚£ä¸ªå‡½æ•°ï¼Œä¼ å…¥å‚æ•°ï¼š
```js
_doRequire(module, module.exports, __filename, __dirname);
```

* æœ€å`require`è¿”å›çš„æ˜¯`module.exports`çš„å€¼ã€‚

æŒ‰ç…§ä¸Šé¢çš„è¿‡ç¨‹ï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆæ¸…æ¥šåœ°ç†è§£æ¨¡å—çš„å¯¼å‡ºè¿‡ç¨‹ã€‚å¹¶ä¸”ä¹Ÿèƒ½å¾ˆå¿«åœ°åˆ¤æ–­ä¸€äº›å†™æ³•æ˜¯å¦æœ‰é—®é¢˜ï¼š

**é”™è¯¯å†™æ³•ï¼š**
```js
function addTwoNumber(a, b) {
    return a + b;
}

exports = {
    addTwoNumber: addTwoNumber;
}
```

è¿™ç§å†™æ³•ä¸ºä»€ä¹ˆä¸å¯¹ï¼Ÿ`exports`å®é™…ä¸Šåˆå§‹æ—¶æ˜¯`module.exports`çš„ä¸€ä¸ªå¼•ç”¨ã€‚ç»™`exports`èµ‹ä¸€ä¸ªæ–°å€¼åï¼Œ`module.exports`å¹¶æ²¡æœ‰æ”¹å˜ï¼Œè¿˜æ˜¯æŒ‡å‘ç©ºå¯¹è±¡ã€‚æœ€åè¿”å›çš„å¯¹è±¡æ˜¯`module.exports`ï¼Œæ²¡æœ‰`addTwoNumber`æ¥å£ã€‚

**æ­£ç¡®å†™æ³•ï¼š**
```js
function addTwoNumber(a, b) {
    return a + b;
}

// æ­£ç¡®å†™æ³•ä¸€
exports.addTwoNumber = addTwoNumber;

// æ­£ç¡®å†™æ³•äºŒ
module.exports.addTwoNumber = addTwoNumber;

// æ­£ç¡®å†™æ³•ä¸‰
module.exports = {
    addTwoNumber: addTwoNumber
};
```

`exports`å’Œ`module.exports`å¼€å§‹æŒ‡å‘çš„æ˜¯åŒä¸€ä¸ªå¯¹è±¡ã€‚å†™æ³•ä¸€é€šè¿‡`exports`è®¾ç½®å±æ€§ï¼ŒåŒæ ·å¯¹`module.exports`ä¹Ÿå¯è§ã€‚å†™æ³•äºŒé€šè¿‡`module.exports`è®¾ç½®å±æ€§ä¹Ÿå¯ä»¥å¯¼å‡ºã€‚
å†™æ³•ä¸‰ç›´æ¥è®¾ç½®`module.exports`å°±æ›´ä¸ç”¨è¯´äº†ã€‚

å»ºè®®åœ¨ç¨‹åºå¼€å‘ä¸­ï¼ŒåšæŒä¸€ç§å†™æ³•ã€‚**ä¸ªäººè§‰å¾—å†™æ³•ä¸‰æ˜¾ç¤ºè®¾ç½®ç›¸å¯¹è¾ƒå®¹æ˜“ç†è§£ã€‚**

**æœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„ï¼šä¸æ˜¯åªæœ‰å¯¹è±¡å¯ä»¥å¯¼å‡ºï¼Œå‡½æ•°ã€ç±»ç­‰å€¼ä¹Ÿå¯ä»¥ã€‚**ä¾‹å¦‚ä¸‹é¢å°±å¯¼å‡ºäº†ä¸€ä¸ªå‡½æ•°ï¼š
```js
function addTwoNumber(a, b) {
    return a + b;
}

module.exports = addTwoNumber;
```

### 3.ESæ¨¡å—

ES6 åœ¨æ ‡å‡†å±‚é¢ä¸º Javascript å¼•å…¥äº†ä¸€å¥—ç®€å•çš„æ¨¡å—ç³»ç»Ÿã€‚ES6 æ¨¡å—å®Œå…¨å¯ä»¥å–ä»£ CommonJS å’Œ AMD è§„èŒƒã€‚å½“å‰çƒ­é—¨çš„å¼€æºæ¡†æ¶ React å’Œ Vue éƒ½å·²ç»ä½¿ç”¨äº† ES6 æ¨¡å—æ¥å¼€å‘ã€‚

#### åŸºæœ¬ä½¿ç”¨

ES6 æ¨¡å—ä½¿ç”¨`export`å¯¼å‡ºæ¥å£ï¼Œ`import from`å¯¼å…¥éœ€è¦ä½¿ç”¨çš„æ¥å£ï¼š

```js
// myMath.js
export var pi = 3.14;

export function addTwoNumber(a, b) {
    return a + b;
}

// æˆ–
var pi = 3.14;

function addTwoNumber(a, b) {
    return a + b;
}

export { pi, addTwoNumber };
```

```js
// main.js
import { addTwoNumber } from './myMath';

console.log(addTwoNumber(10, 20));
```

åœ¨`myMath.js`ä¸­é€šè¿‡`export`å¯¼å‡ºä¸€ä¸ªå˜é‡`pi`å’Œä¸€ä¸ªå‡½æ•°`addTwoNumber`ã€‚ä¸Šä¾‹ä¸­æ¼”ç¤ºäº†ä¸¤ç§å¯¼å‡ºæ–¹å¼ã€‚ä¸€ç§æ˜¯ä¸€ä¸ªä¸ªå¯¼å‡ºï¼Œå¯¹æ¯ä¸€ä¸ªéœ€è¦å¯¼å‡ºçš„æ¥å£éƒ½åº”ç”¨ä¸€æ¬¡`export`ã€‚ç¬¬äºŒç§æ˜¯åœ¨æ–‡ä»¶ä¸­æŸå¤„é›†ä¸­å¯¼å‡ºã€‚å½“ç„¶ï¼Œä¹Ÿå¯ä»¥æ··åˆä½¿ç”¨è¿™ä¸¤ç§æ–¹å¼ã€‚**æ¨èä½¿ç”¨ç¬¬äºŒç§å¯¼å‡ºæ–¹å¼ï¼Œå› ä¸ºèƒ½åœ¨ä¸€å¤„æ¯”è¾ƒæ¸…æ¥šçš„çœ‹å‡ºæ¨¡å—å¯¼å‡ºäº†å“ªäº›æ¥å£ã€‚**

#### ES6 æ¨¡å—ç‰¹æ€§

ES6 æ¨¡å—æœ‰ä¸€äº›éœ€è¦äº†è§£å’Œæ³¨æ„çš„ç‰¹æ€§ã€‚

##### é™æ€åŠ è½½

ES6 æ¨¡å—æœ€é‡è¦çš„ç‰¹æ€§æ˜¯â€œé™æ€åŠ è½½â€ï¼Œå¯¼å…¥çš„æ¥å£æ˜¯åªè¯»çš„ï¼Œä¸èƒ½ä¿®æ”¹ã€‚NodeJS ä¸­çš„æ¨¡å—ï¼Œæ˜¯åŠ¨æ€åŠ è½½çš„ã€‚

**é™æ€åŠ è½½å°±æ˜¯â€œç¼–è¯‘â€æ—¶å°±å·²ç»ç¡®å®šäº†æ¨¡å—å¯¼å‡ºï¼Œå¯ä»¥åšåˆ°é«˜æ•ˆç‡ï¼Œå¹¶ä¸”ä¾¿äºåšé™æ€ä»£ç åˆ†æã€‚åŒæ—¶ï¼Œé™æ€åŠ è½½ä¹Ÿé™åˆ¶äº†æ¨¡å—çš„åŠ è½½åœ¨æ–‡ä»¶ä¸­æ‰€æœ‰è¯­å¥ä¹‹å‰ï¼Œå¹¶ä¸”å¯¼å…¥è¯­æ³•ä¸­ä¸èƒ½å«æœ‰åŠ¨æ€çš„è¯­æ³•ç»“æ„ï¼ˆä¾‹å¦‚å˜é‡ã€ifè¯­å¥ç­‰ï¼‰ã€‚**

ä¾‹å¦‚ï¼š

```js
// å¯ä»¥è°ƒç”¨ï¼Œå› ä¸ºæ¨¡å—åŠ è½½æ˜¯â€œç¼–è¯‘â€æ—¶è¿›è¡Œçš„ã€‚
funcA();
import { funcA, funcB } from './myModule';

// é”™è¯¯ï¼Œå¯¼å…¥è¯­æ³•ä¸­å«æœ‰å˜é‡
var foo = './myModule';
import { funcA, funcB } from './myModule';

// é”™è¯¯ï¼Œåœ¨ifè¯­å¥ä¸­
if (foo == "myModule") {
    import { funcA, funcB } from './myModule';
} else {
    import { funcA, funcB } from './hisModule';
}


// é”™è¯¯ï¼Œå¯¼å‡ºçš„æ¥å£æ˜¯åªè¯»çš„ï¼Œä¸èƒ½ä¿®æ”¹
import { funcA, funcB } from './myModule';
funcA = function () {};
```

**å¯¼å‡ºçš„æ¥å£ä¸æ¨¡å—ä¸­å®šä¹‰çš„å˜é‡æˆ–å‡½æ•°å¿…é¡»æ˜¯ä¸€ä¸€å¯¹åº”çš„**ã€‚è€Œä¸”æ¨¡å—å†…ç›¸åº”çš„å€¼ä¿®æ”¹äº†ï¼Œå¤–éƒ¨ä¹Ÿèƒ½æ„ŸçŸ¥åˆ°ã€‚çœ‹ä¸‹é¢ä»£ç ï¼š

```js
// é”™è¯¯ï¼Œå¯¼å‡ºå€¼1ï¼Œæ¨¡å—ä¸­æ²¡æœ‰å¯¹åº”
export 1;

// é”™è¯¯ï¼Œå®é™…ä¸Šä¹Ÿæ˜¯å¯¼å‡º1ï¼Œæ¨¡å—ä¸­æ²¡æœ‰å¯¹åº”
var m = 1;
export m;

// å¯ä»¥è¿™æ ·æ¥å¯¼å‡ºï¼Œå¯¼å‡ºçš„mä¸æ¨¡å—ä¸­çš„å˜é‡må¯¹åº”
export var m = 1;

// å¯ä»¥è¿™æ ·å¯¼å‡º
var m = 1;
export {m};
```

```js
var foo = "bar";
setTimeout(2000, () => { foo = "baz"});

// 2såfooå˜ä¸º"baz"ï¼Œå¤–éƒ¨èƒ½æ„ŸçŸ¥åˆ°
```

##### åˆ«å

åœ¨å¯¼å‡ºæ¨¡å—æ—¶ï¼Œå¯ä»¥ä¸ºæ¥å£æŒ‡å®šä¸€ä¸ªåˆ«åã€‚è¿™æ ·ï¼Œåç»­å¯ä»¥ä¿®æ”¹å†…éƒ¨æ¥å£è€Œä¿æŒå¯¼å‡ºæ¥å£ä¸å˜ã€‚ä¾‹å¦‚ï¼š

```js
// myModule.js
var funcA = function () {
}

var funcB = function () {
}

export {
    funcA as func1,
    funcB as func2,
    funcB as myFunc,
}
```

ä¸Šé¢æˆ‘ä»¬å¯¼å‡ºä»¥åˆ«å`func1`å¯¼å‡ºå‡½æ•°`funcA`ï¼Œä»¥åˆ«å`func2`å’Œ`myFunc`å¯¼å‡ºå‡½æ•°`funcB`ã€‚`func2`å’Œ`myFunc`éƒ½æ˜¯æŒ‡å‘åŒä¸€ä¸ªå‡½æ•°`funcB`çš„ã€‚ä¸‹é¢çœ‹çœ‹ä½¿ç”¨è¿™ä¸ªæ¨¡å—ï¼š

```js
// main.js
import { func1, func2, myFunc } from './myModule';
```

**åŒæ ·çš„ï¼Œå¯¼å…¥æ¨¡å—æ—¶ä¹Ÿå¯ä»¥æŒ‡å®šåˆ«åï¼š**
```js
// main.js
import { func1 as func } from './myModule';
```

##### defaultå¯¼å‡º

ä¸Šé¢ä»‹ç»çš„æ¨¡å—å¯¼å…¥å¿…é¡»çŸ¥é“æ¥å£åå­—ã€‚æœ‰æ—¶å€™ï¼Œç”¨æˆ·å­¦ä¹ ä¸€ä¸ªæ¨¡å—æ—¶å¸Œæœ›èƒ½å¤Ÿå¿«é€Ÿä¸Šæ‰‹ï¼Œä¸æƒ³å»çœ‹æ–‡æ¡£ï¼ˆæ€ä¹ˆä¼šæœ‰è¿™ä¸ªæ‡’çš„äººğŸ¤£ï¼‰ã€‚ES6 æä¾›äº†defaultå¯¼å‡ºã€‚ä¾‹å¦‚ï¼š

```js
// myModule.js
export default function () {
    console.log('hi');
}

// defaultå¯¼å‡ºæ–¹å¼å¯ä»¥çœ‹åšæ˜¯å¯¼å‡ºäº†ä¸€ä¸ªåˆ«åä¸ºdefaultçš„æ¥å£
var f = function () {
    console.log('hi');
}
export { f as default };
```

åœ¨å¤–éƒ¨å¯¼å…¥çš„æ—¶å€™ï¼Œéœ€è¦çœç•¥èŠ±æ‹¬å·ï¼š

```js
// main.js
import func from './myModule';
func();
```

ä¹Ÿå¯ä»¥ä¸¤ç§æ–¹å¼ï¼ŒåŒæ—¶ä½¿ç”¨ï¼š
```js
// myModule.js
function foo() {
    console.log('foo');
}

export default foo;

function bar() {
    console.log('bar');
}

export { bar };
```

```js
// main.js
import foo, { bar } from './myModule';
```

##### æ•´ä½“åŠ è½½

ES6 è¿˜å…è®¸ä¸€ç§æ•´ä½“åŠ è½½çš„æ–¹å¼å¯¼å…¥æ¨¡å—ã€‚é€šè¿‡ä½¿ç”¨`import *`å¯ä»¥å¯¼å…¥æ¨¡å—ä¸­å¯¼å‡ºçš„æ‰€æœ‰æ¥å£ï¼š

```js
// myModule.js
export function funcA() {
    console.log('funcA');
}

export function funcB() {
    console.log('funcB');
}
```

```js
// main.js
import * as m from './myModule';

m.funcA();
m.funcB();
```

æ•´ä½“åŠ è½½æ‰€åœ¨çš„é‚£ä¸ªå¯¹è±¡ï¼ˆ`m`ï¼‰ï¼Œåº”è¯¥æ˜¯å¯ä»¥é™æ€åˆ†æçš„ï¼Œæ‰€ä»¥ä¸å…è®¸è¿è¡Œæ—¶æ”¹å˜ã€‚æ‰€ä»¥ï¼Œä¸‹é¢çš„å†™æ³•éƒ½æ˜¯ä¸å…è®¸çš„ï¼š

```js
// main.js
import * as m from './myModule';

// é”™è¯¯
m.name = 'darjun';
m.func = function () {};
```

##### Node ä¸­ä½¿ç”¨ ES6 æ¨¡å—

Node ç”±äºå·²ç»æœ‰ CommonJS çš„æ¨¡å—è§„èŒƒäº†ï¼Œä¸ ES6 æ¨¡å—ä¸å…¼å®¹ã€‚ä¸ºäº†ä½¿ç”¨ ES6 æ¨¡å—ï¼ŒNode è¦æ±‚ ES6 æ¨¡å—é‡‡ç”¨`.mjs`åç¼€åï¼Œè€Œä¸”æ–‡ä»¶ä¸­åªèƒ½ä½¿ç”¨`import`å’Œ`export`ï¼Œä¸èƒ½ä½¿ç”¨`require`ã€‚è€Œä¸”è¯¥åŠŸèƒ½è¿˜åœ¨è¯•éªŒé˜¶æ®µï¼ŒNode v8.5.0ä»¥ä¸Šç‰ˆæœ¬ï¼ŒæŒ‡å®š`--experimental-modules`å‚æ•°æ‰èƒ½ä½¿ç”¨ï¼š

```js
// myModule.mjs
var counter = 1;

export function incCounter() {
    console.log('counter:', counter);
    counter++;
}
```

```js
// main.mjs
import { incCounter } from './myModule';

incCounter();
```

ä½¿ç”¨ä¸‹é¢å‘½ä»¤è¡Œè¿è¡Œç¨‹åºï¼š
```js
$ node --experimental-modules main.mjs
```

### 4.æ€»ç»“

éšç€ Javascript åœ¨å¤§å‹é¡¹ç›®ä¸­å ç”¨ä¸¾è¶³è½»é‡çš„ä½ç½®ï¼Œæ¨¡å—çš„ä½¿ç”¨ç§°ä¸ºå¿…ç„¶ã€‚Node ä¸­ä½¿ç”¨ CommonJS è§„èŒƒã€‚ES6 ä¸­å®šä¹‰äº†ç®€å•æ˜“ç”¨é«˜æ•ˆçš„æ¨¡å—è§„èŒƒã€‚ES6 è§„èŒƒåŒ–æ˜¯ä¸ªå¿…ç„¶çš„è¶‹åŠ¿ï¼Œæ‰€ä»¥åœ¨æŒæ¡å½“å‰ CommonJS è§„èŒƒçš„å‰æä¸‹ï¼Œå­¦ä¹  ES6 æ¨¡å—åŠ¿åœ¨å¿…è¡Œã€‚

### 5.å‚è€ƒé“¾æ¥

1. [Javascriptæ¨¡å—åŒ–ç¼–ç¨‹ï¼ˆä¸€ï¼‰](http://www.ruanyifeng.com/blog/2012/10/javascript_module.html)
2. [Javascriptæ¨¡å—åŒ–ç¼–ç¨‹ï¼ˆäºŒï¼‰](http://www.ruanyifeng.com/blog/2012/10/asynchronous_module_definition.html)
3. [Javascriptæ¨¡å—åŒ–ç¼–ç¨‹ï¼ˆä¸‰ï¼‰](http://www.ruanyifeng.com/blog/2012/11/require_js.html)
4. [ES6 Module](http://es6.ruanyifeng.com/#docs/module)

å…³äºæˆ‘ï¼š
[ä¸ªäººä¸»é¡µ](https://darjun.github.io) [ç®€ä¹¦](https://www.jianshu.com/u/0aca4aa367c8) [æ˜é‡‘](https://juejin.im/user/5be15200e51d4505466ce2f4)